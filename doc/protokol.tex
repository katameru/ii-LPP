\documentclass[a4paper, 10pt]{article}
\usepackage[MeX]{polski}
\usepackage[utf8]{inputenc}
\usepackage{amsmath,amsthm,amssymb}
\usepackage[lmargin=2.7cm]{geometry}
\input{titlepage.sty}

\begin{document}

%strona tytułowa
\newtitle{Komunikacja klient-serwer}
\tableofcontents

\newpage
\section{Opis protokołu}
Komunikacja pomiędzy klientem a serwerem odywa się przez wymianę pakietów UDP z wiadomościami zawartymi w polu danych. W warstwie aplikacji protokół ma formę pytanie-odpowiedź, co zapewnia odporność na błędy sieci związane zstratą pakietów. Wiadomości przesyłane są w formacie JSON, co pozwala na wykorzystanie istniejących bibliotek do prostego kodowania i dekodowania informacji.

\section{Lista możliwych komunikatów}
\subsection{Komunikaty wysyłane przez klienta do serwera}
\begin{description}
 \item[newclient] -- komunikat informujący o chęci przyłączenia się do serwera. W treści komunikatu zawarty jest wybrany przez klienta identyfikator.
 \item[echoresponse] -- komunikat wysyłany w odpowiedzi na \textbf{echorequest}.
 \item[newchannel] -- komunikat będący prośbą o założenie nowego kanału do rozmowy. W treści komunikatu zawarta jest wybrana przez klienta nazwa nowego kanału.
 \item[join] -- komunikat będący prośbą o przyłączenie do kanału. W treści komunikatu zawarta jest nazwa kanału do którego chce się przyłączyć klient.
 \item[exit] -- komunikat będący prośbą o wypisanie klienta z kanału rozmowy.
 \item[sendchannels] -- komunikat będący prośbą o przesłanie listy kanałów do których może dołączyć klient.
 \item[holepunch] -- komunikat żądający od serwera przekazania otwartego kanału komunikacji do użytkownika, którego identyfikator jest zawarty w treści komunikatu.
\end{description}


\subsection{Komunikaty wysyłane przez serwera do klienta}
\begin{description}
 \item[welcome] -- odpowiedź na \textbf{newclient}. Komunikat ten oznacza, że serwer zaakceptował wybrany identyfikator.
 \item[invalidnick] -- odpowiedź na \textbf{newclient}. Komunikat ten oznacza, że wybrany identyfikator nie został zaakceptowany. W treści komunikatu przesyłany jest numer błędu i jego opis.
 \item[echorequest] -- komunikat żądający od klienta potwierdzenia sowjej obecności.
 \item[channellist] -- odpowiedź na \textbf{sendchannels}. W treści komunikatu zawarta jest lista kanałów do których może dołączyć klient.
 \item[channelaccepted] -- odpowiedź na \textbf{newchannel}. Komunikat ten oznacza, że serwer akceptuje założenie przez klienta nowego kanału rozmowy.
  \item[channelrejected] -- odpowiedź na \textbf{newchannel}. Komunikat ten oznacza, że serwer odrzuca założenie przez klienta nowego kanału rozmowy. W treści komunikatu przesyłany jest numer błędu i jego opis.
 \item[joinaccepted] -- odpowiedź na \textbf{join}. Komunikat ten oznacza, że prośba klienta o dołączenie do pewnego kanału została zaakceptowana.
  \item[joinrejected] -- odpowiedź na \textbf{join}. Komunikate ten oznacza, że prośba klienta o dołączenie do pewnego kanału została odrzucona. W treści komunikatu przesyłany jest numer błędu i jego opis.
 \item[adress] -- odpowiedź na \textbf{holepunch}. W treści komunikatu przesyłany jest identyfikator użytkownika wraz z jego adresem zewnętrznym i portem do komunikacji.
 \item[channelcanceled] -- komunikat informujący klienta, że kanał w którym się znajduje przestał istnieć.
  \item[userjoined] -- komunikat informujący klienta, że do kanału w którym się znajduje dołączył użytkownik. W treści komunikatu przesyłany jest identyfikator dołączającego użytkownika.
 \item[userleft] -- komunikat informujący klienta, że kanał w którym się znajduje opuścił użytkownik. W treści komunikatu przesyłany jest identyfikator odchodzącego użytkownika.
 \item[error] -- komunikat wysyłany gdy wystąpi bład inny niż te opisane wyżej. W treści komunikatu przesyłany jest numer błędu i jego opis.
\end{description}

\subsection{Komunikaty wysyłane prez klienta do klienta}
\begin{description}
\item[genericdata]  -- 
\end{description}


\end{document} 
